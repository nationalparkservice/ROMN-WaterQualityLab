# Overview

This repository houses ROMN's code for processing and quality control of water chemistry lab deliverables from CCAL (perhaps also Test America eventually).

# Contents

Code folder:

- CCAL_processing_template.Rmd: a template for creating the EQuIS Electronic Data Deliverable (EDD) for CCAL data.
- CCAL_compare_current_to_historical_EDDs.Rmd: a document comparing the CCAL EDDs generated by the current R-based workflow to those generated by the previous Visual Basic workflow.
- additional_processing_for_analysis.Rmd: a template for additional processing of data for analysis. Incomplete/draft.
- format_edd.R: contains functions called by the scripts above for processing water quality lab data.
- test_edd.R: contains additional functions for comparing EDDs, called by CCAL_compare_current_to_historical_EDDs.Rmd.

Data folder: blocked by `.gitignore`. See the setup instructions below.

Tests folder:
- test-data: a subfolder containing data for the testing suite. Blocked by `.gitignore`. See the setup instructions below.
- test-qc.R: a script for verifying that the quality control in code/format_edd.R is working properly

# Setup

Since we are not storing data on GitHub, you will need to set up the data and tests/test-data directories on your local computer.
To do this, create a folder called data.
Inside this folder create four subfolders: output, databases, EDD_examples, and raw.

For now, you can leave the output folder empty.
It will populate with files as you run the code in this repository.

In the databases folder, place a copy of this database from the Z drive: "Z:\MONITORING\Streams\Data\Tools\SEI_ROMN_WQLab_Processing_Template_20230628v2.accdb".
Some of the tables are on SQL Server so that may require additional setup.
We use the dbo_Site, dbo_SitesMetadata, dbo_CollectionEvent, and dbo_WaterSediment, and tbl_Projects_EDD tables in this database to create EDDs from CCAL deliverables.

In the EDD_examples folder, copy over the examples from this location on the Z drive:
FIND A PLACE TO PUT THIS.
These examples are used in CCAL_compare_current_to_historical_EDDs.Rmd to compare the results of our historical and new CCAL data processing scripts.

In the raw folder, copy over the limits table and some CCAL deliverables from this location on the Z drive:
FIND A PLACE TO PUT THIS
The limits table is required for creating any EDD, and must be kept up to date.
The CCAL deliverables from the Z drive allow the examples to run in the R Markdown scripts.
The raw folder is also where you will put additional CCAL deliverables for processing as they become available.

Finally, inside the tests folder, create a tests-data subfolder.
Copy over the files from this location on the Z drive:
FIND A PLACE TO PUT THIS.
These files are used to verify that our quality control is working properly.
